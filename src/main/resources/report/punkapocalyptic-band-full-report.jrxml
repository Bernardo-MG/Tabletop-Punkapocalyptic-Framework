<?xml version="1.0" encoding="UTF-8"?>
<jasperReport name="FirstJasper" columnCount="2" pageWidth="595" pageHeight="842" columnWidth="270" columnSpacing="15" leftMargin="20" rightMargin="20" topMargin="30" bottomMargin="30">
	<property name="com.jasperassistant.designer.Grid" value="false"/>
	<property name="com.jasperassistant.designer.SnapToGrid" value="false"/>
	<property name="com.jasperassistant.designer.GridWidth" value="12"/>
	<property name="com.jasperassistant.designer.GridHeight" value="12"/>
	<parameter name="unitsReport" class="net.sf.jasperreports.engine.JasperReport"/>
	<field name="bullets" class="com.wandrell.tabletop.business.model.valuehandler.ValueHandler"/>
	<field name="units" class="java.util.Collection"/>
	<field name="faction" class="com.wandrell.tabletop.business.model.punkapocalyptic.faction.Faction"/>
	<group name="band_info">
	</group>
	<title>
		<band height="100">
			<elementGroup>
				<line>
					<reportElement x="0" y="0" width="555" height="1"/>
					<graphicElement/>
				</line>
			</elementGroup>
			<staticText>
				<reportElement x="180" y="5" width="375" height="35"/>
				<textElement textAlignment="Right">
					<font size="22"/>
				</textElement>
				<text><![CDATA[PunkaBuilder list report]]></text>
			</staticText>
			<staticText>
				<reportElement x="180" y="40" width="375" height="15"/>
				<textElement textAlignment="Right"/>
				<text><![CDATA[Made with PunkaBuilder]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="0" y="50" width="50" height="15"/>
				<text><![CDATA[Faction: ]]></text>
			</staticText>
			<textField>
				<reportElement x="0" y="50" width="136" height="15"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{faction}.getName()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="0" y="70" width="50" height="15">
					<printWhenExpression>
						<![CDATA[$F{bullets}.getStoredValue()>0]]>
					</printWhenExpression>
				</reportElement>
				<text><![CDATA[Bullets: ]]></text>
			</staticText>
			<textField>
				<reportElement x="50" y="70" width="136" height="15">
					<printWhenExpression>
						<![CDATA[$F{bullets}.getStoredValue()>0]]>
					</printWhenExpression>
				</reportElement>
				<textFieldExpression><![CDATA[$F{bullets}.getStoredValue()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="0" y="70" width="50" height="15"/>
				<text><![CDATA[Units: ]]></text>
			</staticText>
			<textField>
				<reportElement x="50" y="70" width="136" height="15"/>
				<textFieldExpression><![CDATA[$F{units}.size()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="50">
			<subreport>
				<reportElement isPrintRepeatedValues="false" x="5" y="25" width="325" height="20" isRemoveLineWhenBlank="true" backcolor="#FFCC99"/>
	            <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{units})]]></dataSourceExpression>
				<subreportExpression><![CDATA[$P{unitsReport}]]></subreportExpression>
	        </subreport>
		</band>
	</detail>
	<pageFooter>
		<band height="30">
			<rectangle>
				<reportElement mode="Transparent" x="0" y="5" width="555" height="25"/>
				<graphicElement/>
			</rectangle>
			<textField>
				<reportElement x="200" y="10" width="75" height="20"/>
				<textElement textAlignment="Right">
					<font size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="275" y="10" width="5" height="20"/>
				<textElement textAlignment="Center">
					<font size="14"/>
				</textElement>
				<text><![CDATA[/]]></text>
			</staticText>
			<textField evaluationTime="Report">
				<reportElement x="280" y="10" width="75" height="20"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
