<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://www.springframework.org/schema/c"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd">

	<!-- This context file is meant to be used for loading test parameters from 
		XML files -->
	<!-- As it is a global and one time job, all classes are singletons -->

	<!-- ************************************************************ -->
	<!-- *********************** FILE STREAMS *********************** -->
	<!-- ************************************************************ -->

	<!-- Creates the paths to the XML and XSD files -->
	<!-- For this two parameters are required, two strings indicating the paths 
		to these files -->

	<!-- Values file stream -->
	<bean id="streamValues" class="com.wandrell.util.ResourceUtils"
		factory-method="getClassPathInputStream">
		<constructor-arg type="java.lang.String" value="${file.values}" />
	</bean>

	<!-- Validation file stream -->
	<bean id="streamValidator" class="com.wandrell.util.ResourceUtils"
		factory-method="getClassPathInputStream">
		<constructor-arg type="java.lang.String" value="${file.validator}" />
	</bean>

	<!-- ************************************************************ -->
	<!-- *************************** FILE *************************** -->
	<!-- ************************************************************ -->

	<!-- Builds the file handler -->
	<!-- As it used the XML file handler, it creates a reader, a writer and 
		a validator, then builds the file handler with them -->

	<!-- XML file handler -->
	<!-- Requires reading, writing and validation modules -->
	<bean id="parametersFileHandler" class="com.wandrell.util.file.xml.DefaultXMLFileHandler"
		c:reader-ref="documentReader" c:validator-ref="documentValidator" />

	<!-- Nodes reader -->
	<bean id="nodesReader" class="${file.handler.reader.node.reader.class}" />

	<!-- Filtered XML document reader -->
	<bean id="documentReader"
		class="com.wandrell.util.file.xml.module.reader.DefaultFilteredXMLDocumentReader"
		c:node="data" c:reader-ref="nodesReader" />

	<!-- XML document validator -->
	<!-- Requires the path to the XSD file -->
	<bean id="documentValidator"
		class="com.wandrell.util.file.xml.module.validator.XSDValidator"
		c:file="${file.validator}" c:stream-ref="streamValidator" />

</beans>